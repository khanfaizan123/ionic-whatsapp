"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[348],{5961:(k,u,a)=>{a.d(u,{GW:()=>g,dk:()=>e,oK:()=>m});var m=function(t){return t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS",t}(m||{}),g=function(t){return t.Rear="REAR",t.Front="FRONT",t}(g||{}),e=function(t){return t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl",t}(e||{})},8162:(k,u,a)=>{a.d(u,{V1:()=>e,dk:()=>g.dk,oK:()=>g.oK});var m=a(2726),g=a(5961);const e=(0,m.fo)("Camera",{web:()=>a.e(6468).then(a.bind(a,6468)).then(t=>new t.CameraWeb)})},348:(k,u,a)=>{a.d(u,{s:()=>M});var m=a(5861),g=a(8162),e=a(2029),t=a(3134),p=a(6658);let h=(()=>{var r;class c{constructor(o,n,i){this.modalController=o,this.actionSheetController=n,this.chatservice=i}ngOnInit(){localStorage.getItem("photo")?this.imageUrl=localStorage.getItem("photo"):this.chatservice.imageUrl$.subscribe(o=>{this.imageUrl=o}),this.presentActionSheet()}presentActionSheet(){var o=this;return(0,m.Z)(function*(){yield(yield o.actionSheetController.create({header:"Select Image",buttons:[{text:"Photo",icon:"camera",handler:()=>{o.takePicture(g.oK.Camera)}},{text:"Gallery",icon:"image",handler:()=>{o.takePicture(g.oK.Photos)}},{text:"Cancel",icon:"close",role:"cancel"}]})).present()})()}takePicture(o){var n=this;return(0,m.Z)(function*(){try{const i=yield g.V1.getPhoto({quality:90,allowEditing:!0,resultType:g.dk.DataUrl,source:o});n.imageUrl=i.dataUrl,n.chatservice.setImageUrl(n.imageUrl),localStorage.setItem("photo",n.imageUrl)}catch(i){console.error("Error taking picture:",i)}})()}close(){this.modalController.dismiss()}}return(r=c).\u0275fac=function(o){return new(o||r)(e.Y36(t.IN),e.Y36(t.BX),e.Y36(p.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-image-modal"]],decls:7,vars:1,consts:[[1,"ion-padding",2,"background-color","white"],["slot","end"],[3,"click"],["name","close-outline"],[3,"src"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-content",0)(1,"ion-header")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return n.close()}),e._UZ(4,"ion-icon",3),e.qZA()()(),e.TgZ(5,"div",2),e.NdJ("click",function(){return n.presentActionSheet()}),e._UZ(6,"img",4),e.qZA()()),2&o&&(e.xp6(6),e.Q6J("src",n.imageUrl,e.LSH))},dependencies:[t.YG,t.Sm,t.W2,t.Gu,t.gu],styles:["div[_ngcontent-%COMP%]{width:-webkit-fill-available;height:-webkit-fill-available;overflow:hidden}div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}"]}),c})();var f=a(9862),_=a(6814),l=a(95);const b=["messageContainer"];function v(r,c){if(1&r){const s=e.EpF();e.TgZ(0,"ion-item",19),e.NdJ("click",function(){const i=e.CHM(s).$implicit,d=e.oxw(3);return e.KtG(d.selectItem(i.name))}),e._uU(1),e.qZA()}if(2&r){const s=c.$implicit;e.xp6(1),e.hij(" ",s.name," ")}}function C(r,c){if(1&r&&(e.TgZ(0,"ion-list"),e.YNc(1,v,2,1,"ion-item",18),e.qZA()),2&r){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.itemList)}}function w(r,c){if(1&r&&e.YNc(0,C,2,1,"ion-list",17),2&r){const s=e.oxw();e.Q6J("ngIf",s.isListOpen)}}function x(r,c){if(1&r&&(e.TgZ(0,"ion-item",23),e._uU(1),e._UZ(2,"ion-icon",24),e.qZA()),2&r){const s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s.text," ")}}function U(r,c){if(1&r&&(e.TgZ(0,"ion-item",25),e._uU(1),e._UZ(2,"ion-icon",24),e.qZA()),2&r){const s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s.text," ")}}function P(r,c){if(1&r&&(e.TgZ(0,"div",null,20),e.YNc(2,x,3,1,"ion-item",21),e.YNc(3,U,3,1,"ion-item",22),e.qZA()),2&r){const s=c.$implicit;e.xp6(2),e.Q6J("ngIf",s.text.length>0&&"other"==s.sender),e.xp6(1),e.Q6J("ngIf",s.text.length>0&&"me"==s.sender)}}let M=(()=>{var r;class c{constructor(o,n,i,d){this.modalController=o,this.http=n,this.chatservice=i,this.actionSheetController=d,this.messages=[],this.name="",this.itemList=[],this.textlist=[],this.textfromuser="",this.usersendmsg="",this.isListOpen=!1,this.imageUrl=""}ionViewWillEnter(){this.name=localStorage.getItem("mytime"),this.callchatapi()}backpage(){this.modalController.dismiss()}ngOnInit(){console.log("ngoninit"),localStorage.getItem("photo")?this.imageUrl=localStorage.getItem("photo"):this.chatservice.imageUrl$.subscribe(n=>{this.imageUrl=n});var o=localStorage.getItem("currentuser");console.log(o),this.chatservice.getMessage().subscribe(n=>{console.log("Received message:",n),console.log(n.data.user,"id yha h"),this.messages.push({text:n.data.text,sender:n.data.user!=o?"other":"me"}),this.scrollToBottom()})}scrollToBottom(){if(this.messageContainer){const o=this.messageContainer.nativeElement;o.scrollBottom=o.scrollHeight}}callchatapi(){this.http.get("./assets/data.json").subscribe(n=>{this.itemList=[];const i=n.chatsdata;console.log(i);for(let d=0;d<i.length;d++)this.itemList.push({name:i[d].name,time:i[d].time})})}sendtext(){this.usersendmsg=this.textfromuser,this.chatservice.sendMessage(this.textfromuser),this.textfromuser=""}openList(){this.isListOpen=!this.isListOpen}selectItem(o){this.name=o,this.isListOpen=!1}openImageModal(){var o=this;return(0,m.Z)(function*(){return(yield o.modalController.create({component:h})).present()})()}}return(r=c).\u0275fac=function(o){return new(o||r)(e.Y36(t.IN),e.Y36(f.eN),e.Y36(p.a),e.Y36(t.BX))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-chat"]],viewQuery:function(o,n){if(1&o&&e.Gf(b,5),2&o){let i;e.iGM(i=e.CRH())&&(n.messageContainer=i.first)}},decls:20,vars:6,consts:[[3,"translucent"],["lines","none",2,"--background","#128c7e"],[2,"display","flex","justify-content","space-around","flex-direction","row","align-items","center","grid-template-columns","auto auto auto auto auto auto","color","white"],["name","arrow-back-sharp",2,"font-size","x-large",3,"click"],[2,"width","32px","height","32px","margin-left","-1rem"],["alt","Silhouette of a person's head",3,"src","click"],["id","yup",2,"--background","transparent","font-weight","600","font-size","large","width","44%","margin-left","-1rem",3,"ngModel","ngModelChange","click"],["trigger","yup"],["name","videocam",2,"font-size","1.5rem","margin-top","0.2rem"],["name","call",2,"font-size","1.5rem","margin-top","0.2rem"],["id","hover-trigger","name","options",2,"font-size","1.5rem","margin-top","0.2rem"],[3,"fullscreen"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","margin","0.5rem"],["id","myInput","placeholder","Message","auto-grow","true",2,"background","black","color","white","font-size","larger","word-wrap","break-word","overflow-wrap","break-word","border-radius","2rem","width","calc(100% - 60px)","resize","none","overflow-y","auto","height","50px","box-sizing","border-box","text-align","center",3,"ngModel","ngModelChange","keyup.enter"],[2,"--background","#128c7e","--border-radius","50%","margin-left","10px",3,"click"],["name","send"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["messageContainer",""],["style","\n        float: left;\n        clear: both;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n        word-break: break-word; /* Add this line to ensure long words break properly */\n        width: fit-content;\n        border-radius: 1rem;\n        margin: 0.4rem;\n        border-top-left-radius: 0rem;\n        font-size: larger;\n        font-family: Nunito-Sans, sans-serif;\n        font-style: normal;\n        background-color: white;\n        color:black;\n      ",4,"ngIf"],["style","\n       \n        clear: both;\n        word-wrap: break-word;\n        float:right;\n        overflow-wrap: break-word;\n        word-break: break-word; /* Add this line to ensure long words break properly */\n        width: fit-content;\n        border-radius: 1rem;\n        margin: 0.4rem;\n        border-top-right-radius: 0rem;\n        font-size: larger;\n        font-family: Nunito-Sans, sans-serif;\n        font-style: normal;\n        background:#7FFFD4;\n        \n      ",4,"ngIf"],[2,"float","left","clear","both","word-wrap","break-word","overflow-wrap","break-word","word-break","break-word","/* add this line to ensure long words break properly */\n        width","fit-content","border-radius","1rem","margin","0.4rem","border-top-left-radius","0rem","font-size","larger","font-family","Nunito-Sans, sans-serif","font-style","normal","background-color","white","color","black"],["color","primary","name","checkmark-done-outline"],[2,"clear","both","word-wrap","break-word","float","right","overflow-wrap","break-word","word-break","break-word","/* add this line to ensure long words break properly */\n        width","fit-content","border-radius","1rem","margin","0.4rem","border-top-right-radius","0rem","font-size","larger","font-family","Nunito-Sans, sans-serif","font-style","normal","background","#7FFFD4"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"ion-icon",3),e.NdJ("click",function(){return n.backpage()}),e.qZA(),e.TgZ(4,"ion-avatar",4)(5,"img",5),e.NdJ("click",function(){return n.openImageModal()}),e.qZA(),e._uU(6," /> "),e.qZA(),e.TgZ(7,"ion-input",6),e.NdJ("ngModelChange",function(d){return n.name=d})("click",function(){return n.openList()}),e.qZA(),e.TgZ(8,"ion-popover",7),e.YNc(9,w,1,1,"ng-template"),e.qZA(),e._UZ(10,"ion-icon",8)(11,"ion-icon",9)(12,"ion-icon",10),e.qZA()()(),e.TgZ(13,"ion-content",11),e.YNc(14,P,4,2,"div",12),e.qZA(),e.TgZ(15,"ion-footer")(16,"div",13)(17,"ion-textarea",14),e.NdJ("ngModelChange",function(d){return n.textfromuser=d})("keyup.enter",function(){return n.sendtext()}),e.qZA(),e.TgZ(18,"ion-button",15),e.NdJ("click",function(){return n.sendtext()}),e._UZ(19,"ion-icon",16),e.qZA()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("src",n.imageUrl,e.LSH),e.xp6(2),e.Q6J("ngModel",n.name),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngForOf",n.messages),e.xp6(3),e.Q6J("ngModel",n.textfromuser))},dependencies:[_.sg,_.O5,l.JJ,l.On,t.BJ,t.YG,t.W2,t.fr,t.Gu,t.gu,t.pK,t.Ie,t.q_,t.g2,t.sr,t.d8,t.j9],styles:[".bg[_ngcontent-%COMP%]{background-image:url(https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png);height:400px;width:100%}ion-content[_ngcontent-%COMP%]::part(background){background-image:url(https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png)}ion-footer[_ngcontent-%COMP%]{background-image:url(https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png)}ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px;overflow:hidden}ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.incoming-message[_ngcontent-%COMP%]{background-color:#e1ffc7;color:#000;padding:10px;border-radius:10px;max-width:80%;margin-bottom:10px;align-self:flex-start}.outgoing-message[_ngcontent-%COMP%]{background-color:#dcf8c6;color:#000;padding:10px;border-radius:10px;max-width:80%;margin-bottom:10px;align-self:flex-end}"]}),c})()},6658:(k,u,a)=>{a.d(u,{a:()=>p});var m=a(5619),g=a(7398),e=a(2029),t=a(5926);let p=(()=>{var h;class f{constructor(l){this.socket=l,this.imageUrlSource=new m.X(""),this.imageUrl$=this.imageUrlSource.asObservable()}setImageUrl(l){this.imageUrlSource.next(l)}getImageUrl(){return this.imageUrlSource.value}sendMessage(l){console.log(l);const b=localStorage.getItem("currentuser");console.log(b),this.socket.emit("message",{text:l,user:b})}getMessage(){return this.socket.fromEvent("received").pipe((0,g.U)(l=>l))}}return(h=f).\u0275fac=function(l){return new(l||h)(e.LFG(t.s))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),f})()}}]);